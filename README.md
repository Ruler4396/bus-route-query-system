# åŸå¸‚å…¬äº¤åœ¨çº¿æŸ¥è¯¢ç³»ç»Ÿ

> åŸºäº Spring Boot çš„æ¯•ä¸šè®¾è®¡é¡¹ç›®ï¼Œæä¾›å…¬äº¤çº¿è·¯æŸ¥è¯¢ã€åœ°å›¾å¯è§†åŒ–ã€æ¨¡æ‹Ÿå®æ—¶è¿½è¸ªç­‰æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º

---

## é¡¹ç›®æ¦‚è¿°

æœ¬ç³»ç»Ÿæ˜¯ä¸€ä¸ª**é¢å‘æ¯•ä¸šè®¾è®¡çš„å…¬äº¤æŸ¥è¯¢æ¼”ç¤ºç³»ç»Ÿ**ï¼Œé‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚ç³»ç»Ÿå®ç°äº†å…¬äº¤çº¿è·¯æŸ¥è¯¢ã€ç«™ç‚¹ä¿¡æ¯æ£€ç´¢ã€åœ°å›¾å¯è§†åŒ–å±•ç¤ºã€æ¨¡æ‹Ÿå®æ—¶è½¦è¾†è¿½è¸ªã€æ— éšœç¢è·¯çº¿è¯„åˆ†æ¨èç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œå±•ç¤ºäº†å®Œæ•´çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆå’Œå¯æ‰©å±•çš„ä»£ç æ¶æ„ã€‚

### è®¾è®¡ç‰¹ç‚¹

| ç‰¹ç‚¹ | è¯´æ˜ |
|------|------|
| ğŸ“ **æ¯•ä¸šè®¾è®¡** | åŠŸèƒ½èšç„¦ï¼Œä»£ç æ¸…æ™°ï¼Œé€‚åˆç­”è¾©æ¼”ç¤º |
| â™¿ **æ— éšœç¢å‹å¥½** | ç¬¦åˆWCAG 2.1æ ‡å‡†ï¼Œæ”¯æŒè§†éšœ/å¬éšœ/è‚¢éšœç”¨æˆ· |
| ğŸ—ºï¸ **åœ°å›¾å±•ç¤º** | é«˜å¾·JS APIï¼ˆä¸»ï¼‰+ Leafletï¼ˆé™çº§å…œåº•ï¼‰ |
| ğŸ¨ **ç²¾è‡´å°å·§** | æ ¸å¿ƒåŠŸèƒ½ç²¾ç®€ï¼ŒUIç¾è§‚ï¼Œäº¤äº’æµç•… |
| ğŸ”§ **å¯æ‰©å±•** | æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ”¹é€ ä¸ºå®é™…ç”Ÿäº§ç³»ç»Ÿ |
| ğŸ“± **å“åº”å¼** | æ”¯æŒPC/å¹³æ¿/æ‰‹æœºå¤šç«¯è®¿é—® |
| ğŸ”Š **è¯­éŸ³æ’­æŠ¥** | æ”¯æŒè·¯çº¿/ç«™ç‚¹ä¿¡æ¯è¯­éŸ³æ’­æŠ¥ |

---

## æ›´æ–°æ—¥å¿—

### v2.8.5 (2026-02-18) - é«˜å¾·åæ ‡ä¸å…¬äº¤çº¿æ ¸å¯¹ç‰ˆ

- [x] ä¿®å¤é«˜å¾·æ¸²æŸ“åæ ‡åç§»ï¼šæ–°å¢ `WGS84 -> GCJ-02` å‰ç«¯è½¬æ¢é“¾è·¯
- [x] é«˜å¾·åœ°å›¾è½¨è¿¹æ¸²æŸ“ç­–ç•¥å‡çº§ä¸ºï¼š`LineSearchå…¬äº¤å®˜æ–¹è½¨è¿¹ > luxianguijié“è·¯è½¨è¿¹ > ç«™ç‚¹ç›´è¿`
- [x] é«˜å¾·æ¨¡å¼ç«™ç‚¹ã€è½¦è¾†ã€è·¯å¾„è§„åˆ’èµ·ç»ˆç‚¹ç»Ÿä¸€ä½¿ç”¨è½¬æ¢ååæ ‡ï¼Œé¿å…â€œç«™ç‚¹è½ç‚¹åç§»/è½¨è¿¹æ‰“ç»“â€
- [x] åœ°å›¾é…ç½®æ–°å¢ `dataCoordinateSystem` ä¸ `amapLineSearchCity`ï¼ˆé»˜è®¤ `wgs84` / `å¹¿å·`ï¼‰

### v2.8.4 (2026-02-18) - è½¨è¿¹ä¸ç«™ç‚¹ç²¾ä¿®ç‰ˆ

- [x] è·¯çº¿è½¨è¿¹æ”¹ä¸º OSRM åŸºäºç«™åºçš„é“è·¯é‡å»ºï¼ˆéç«™ç‚¹ç›´è¿ï¼‰
- [x] ç«™ç‚¹åæ ‡é»˜è®¤é“è·¯å¸é™„ï¼Œå¸é™„åå·®è¿‡å¤§ï¼ˆ>40mï¼‰æ—¶ä¿ç•™åŸå§‹ç«™ç‚¹åæ ‡
- [x] å¹¿å·çœŸå®çº¿è·¯æ•°æ®å·²é‡æ–°å…¥åº“ï¼ˆ5æ¡çº¿è·¯ã€93ç«™ï¼‰

### v2.8.3 (2026-02-18) - ç«™ç‚¹çº åä¸é“è·¯è½¨è¿¹ç‰ˆ

- [x] ä¿®å¤éƒ¨åˆ†ç«™ç‚¹è½åœ¨å›­åŒº/æ™¯ç‚¹å†…éƒ¨çš„é—®é¢˜ï¼ˆç«™ç‚¹åæ ‡çº ååˆ°é“è·¯ï¼‰
- [x] æ–°å¢è·¯çº¿è½¨è¿¹å­—æ®µ `luxianguiji`ï¼ˆOSMé“è·¯æŠ˜çº¿ï¼‰
- [x] åœ°å›¾é¡µè¿çº¿ç”±â€œç«™ç‚¹ç›´è¿â€æ”¹ä¸ºâ€œé“è·¯è½¨è¿¹æ¸²æŸ“â€
- [x] å¹¿å· 5 æ¡çœŸå®çº¿è·¯å·²åŒæ­¥è½¨è¿¹æ•°æ®å¹¶é€šè¿‡æ¥å£æ ¡éªŒ

### v2.8.2 (2026-02-18) - å¹¿å·çœŸå®å…¬äº¤æ•°æ®æ›¿æ¢ç‰ˆ

- [x] ä½¿ç”¨ OpenStreetMap / Overpass API çœŸå®å…¬äº¤å…³ç³»æ•°æ®æ›¿æ¢æ¼”ç¤ºçº¿è·¯
- [x] çº¿è·¯æ›¿æ¢ä¸ºå¹¿å· `1è·¯`ã€`3è·¯`ã€`10è·¯`ã€`16è·¯`ã€`31è·¯`ï¼ˆå•å‘ï¼‰
- [x] åŒæ­¥æ›´æ–°ç«™ç‚¹åæ ‡ä¸ç«™ç‚¹æ— éšœç¢åŸºç¡€ä¿¡æ¯ï¼ˆ93ç«™ï¼‰
- [x] è¿è¡Œä¸­æ•°æ®åº“å·²å®Œæˆåˆ·æ–°å¹¶é€šè¿‡æ¥å£æ ¡éªŒ

### v2.8.1 (2026-02-18) - å¹¿å·ç¤ºä¾‹æ•°æ®åˆ‡æ¢ç‰ˆ

- [x] é»˜è®¤å…¬äº¤ç¤ºä¾‹æ•°æ®ç”±ä¸Šæµ·åˆ‡æ¢ä¸ºå¹¿å·ï¼ˆ5æ¡çº¿è·¯ï¼‰
- [x] æ— éšœç¢ç«™ç‚¹ç¤ºä¾‹æ•°æ®åŒæ­¥åˆ‡æ¢ä¸ºå¹¿å·ï¼ˆ49ä¸ªç«™ç‚¹ï¼‰
- [x] å·²éªŒè¯è¿è¡Œä¸­æ•°æ®åº“æ•°æ®åˆ·æ–°å®Œæˆï¼ˆè·¯çº¿ä¸ç«™ç‚¹ä¸€è‡´ï¼‰

### v2.8.0 (2026-02-18) - é«˜å¾·WebæœåŠ¡åç«¯æ¥å…¥ç‰ˆ

- [x] æ–°å¢åç«¯é«˜å¾·è·¯å¾„è§„åˆ’æ¥å£ï¼š`GET /map/amap/driving`
- [x] æ–°å¢åç«¯åœ°ç†ç¼–ç æ¥å£ï¼š`GET /map/amap/geocode`
- [x] æ–°å¢åç«¯é€†åœ°ç†ç¼–ç æ¥å£ï¼š`GET /map/amap/regeo`
- [x] åœ°å›¾é¡µâ€œé«˜å¾·è·¯å¾„â€æ”¹ä¸ºä¼˜å…ˆèµ°åç«¯æ¥å£ï¼Œå¤±è´¥è‡ªåŠ¨å›é€€å‰ç«¯JSæ’ä»¶
- [x] æ”¯æŒ Leaflet ä¸ é«˜å¾· åŒå¼•æ“å±•ç¤ºç»Ÿä¸€è·¯å¾„ç»“æœ

### v2.7.0 (2026-02-18) - ETAç²¾ç»†åŒ–ç‰ˆ

- [x] å‡çº§ETAæ¨¡å‹ï¼šç”±å›ºå®šç«™æ•°ä¼°ç®—æ”¹ä¸ºâ€œå‰©ä½™è·ç¦» + æ—¶æ®µè·¯å†µ + åœé æ—¶é•¿â€
- [x] ä¼˜å…ˆä½¿ç”¨ `zhandianzuobiao` åæ ‡ç´¯è®¡è·ç¦»ï¼Œç¼ºå¤±æ—¶è‡ªåŠ¨å›é€€ç«™æ•°æ¨¡å‹
- [x] ETAæ¥å£æ–°å¢å¯è§£é‡Šå­—æ®µï¼š`remainingDistanceKm`ã€`trafficLevel`ã€`avgSpeedKmh`ã€`modelType` ç­‰
- [x] åœ°å›¾é¡µETAå±•ç¤ºæ–°å¢â€œå‰©ä½™å…¬é‡Œæ•°/è·¯å†µ/å‡é€Ÿâ€ä¿¡æ¯

### v2.6.0 (2026-02-18) - é«˜å¾·å¯†é’¥è”è°ƒç‰ˆ

- [x] æ¥å…¥é«˜å¾· Web JS API Key
- [x] æ¥å…¥é«˜å¾·å®‰å…¨å¯†é’¥ `securityJsCode`
- [x] åœ°å›¾é»˜è®¤å¼•æ“åˆ‡æ¢ä¸º `gaode`ï¼ŒåŠ è½½å¤±è´¥è‡ªåŠ¨é™çº§ Leaflet

### v2.5.0 (2026-02-18) - ç¦»çº¿åœ°å›¾åˆ‡æ¢ç‰ˆ

- [x] åœ°å›¾é…ç½®æ–°å¢ `leafletTileMode`ï¼ˆ`online/offline`ï¼‰åˆ‡æ¢
- [x] æ”¯æŒç¦»çº¿ç“¦ç‰‡åœ°å€é…ç½®ï¼š`leafletOfflineTileUrl`
- [x] Leaflet åˆå§‹åŒ–æ—¶æŒ‰é…ç½®è‡ªåŠ¨é€‰æ‹©åœ¨çº¿/ç¦»çº¿ç“¦ç‰‡æº
- [x] åœ°å›¾çŠ¶æ€æ æ˜¾ç¤ºå½“å‰ Leaflet ç“¦ç‰‡æ¨¡å¼ï¼ˆåœ¨çº¿ç“¦ç‰‡/ç¦»çº¿ç“¦ç‰‡ï¼‰

### v2.4.0 (2026-02-18) - åå°å¯¼å‡ºé—­ç¯ç‰ˆ

- [x] æ–°å¢åç«¯å¯¼å‡ºæ¥å£ï¼š`GET /gongjiaoluxian/export`
- [x] æ”¯æŒæŒ‰åå°ç­›é€‰æ¡ä»¶å¯¼å‡ºçº¿è·¯æ•°æ®ï¼ˆåç§°/èµ·ç‚¹/é€”ç»ç«™ç‚¹/ç»ˆç‚¹ï¼‰
- [x] ç®¡ç†åå°â€œå…¬äº¤è·¯çº¿â€åˆ—è¡¨æ–°å¢â€œå¯¼å‡ºExcelâ€æŒ‰é’®
- [x] å¯¼å‡ºæ–‡ä»¶åä¸æ ¼å¼ç»Ÿä¸€ä¸ºï¼š`gongjiaoluxian-export.xlsx`

### v2.3.0 (2026-02-18) - å®æ—¶æ¨é€æ›¿æ¢ç‰ˆ

- [x] æ–°å¢åç«¯WebSocketç«¯ç‚¹ï¼š`/ws/vehicle?routeId={id}`
- [x] æ–°å¢è½¦è¾†ä½ç½®å®šæ—¶æ¨é€ä»»åŠ¡ï¼ˆé»˜è®¤2ç§’ä¸€å¸§ï¼‰
- [x] åœ°å›¾é¡µæ¥å…¥WebSocketå®æ—¶è½¦è¾†ä½ç½®æ›´æ–°
- [x] æ¨é€å¤±è´¥è‡ªåŠ¨é™çº§åˆ°å‰ç«¯å®šæ—¶å™¨æ¨¡æ‹Ÿï¼Œä¿è¯æ¼”ç¤ºè¿ç»­æ€§
- [x] é‰´æƒæ‹¦æˆªå™¨æ”¾è¡Œ`/ws/**`æ¡æ‰‹è·¯å¾„
- [x] æ–°å¢ETAæ¥å£`/map/eta/{id}`ä¸åœ°å›¾é¡µå®æ—¶å±•ç¤ºï¼ˆç®€åŒ–ä¼°ç®—æ¨¡å‹ï¼‰

### v2.2.0 (2026-02-18) - åœ°å›¾å¼•æ“åŒæ ˆæ¥å…¥ç‰ˆ

- [x] åœ°å›¾é¡µæ”¯æŒåŒå¼•æ“ï¼š`é«˜å¾·ä¼˜å…ˆ + Leafletå…œåº•`
- [x] æ–°å¢åœ°å›¾å¼•æ“é…ç½®é¡¹`mapEngineConfig`ï¼ˆ`auto/gaode/leaflet`ï¼‰
- [x] æ–°å¢åœ°å›¾é¡µå¼•æ“çŠ¶æ€æç¤ºï¼Œæ”¯æŒé«˜å¾·åŠ è½½å¤±è´¥è‡ªåŠ¨é™çº§
- [x] æ–°å¢â€œé«˜å¾·è·¯å¾„â€æŒ‰é’®ï¼ˆåŸºäºé«˜å¾·`Driving`æ’ä»¶ï¼‰
- [ ] å¾…è¡¥å……ç”Ÿäº§ç¯å¢ƒé«˜å¾·Keyä¸å®‰å…¨é…ç½®ï¼ˆ`securityJsCode/serviceHost`ï¼‰

### v2.1.0 (2026-02-18) - è·¯çº¿æ¨èå‰ç«¯é—­ç¯ç‰ˆ

- [x] å‰å°â€œå…¬äº¤è·¯çº¿â€é¡µæ¥å…¥`/route/plan`æ¥å£
- [x] æ”¯æŒæ¨èåå¥½åˆ‡æ¢ï¼ˆAUTO/ACCESSIBLE/TIME/DISTANCEï¼‰
- [x] å±•ç¤ºæ¨èåˆ†ã€æ— éšœç¢åˆ†ã€æ¨èç†ç”±
- [x] å¢åŠ æ¨èæµç¨‹ç©ºæ€/å¼‚å¸¸æ€æç¤ºï¼ˆå‚æ•°ç¼ºå¤±ã€æ¥å£å¤±è´¥ã€æ— ç»“æœï¼‰
- [x] ä¿®å¤æ— éšœç¢è®¾ç½®é¡µé«˜å¯¹æ¯”åº¦å¼€å…³è°ƒç”¨å¼‚å¸¸ï¼ˆ`enableHighContrast/disableHighContrast`ï¼‰

### v2.0.0 (2026-02-04) - æ— éšœç¢åŠŸèƒ½å¢å¼ºç‰ˆ

- [x] æ–°å¢æ— éšœç¢è®¾æ–½æ•°æ®æ¨¡å‹ï¼ˆå…¬äº¤è·¯çº¿ã€ç«™ç‚¹ã€ç”¨æˆ·æ¡£æ¡ˆï¼‰
- [x] å®ç°æ— éšœç¢è·¯çº¿è§„åˆ’ç®—æ³•ï¼ˆæ™ºèƒ½æ¨è+æ‰‹åŠ¨åˆ‡æ¢ï¼‰
- [x] é›†æˆè¯­éŸ³æ’­æŠ¥åŠŸèƒ½ï¼ˆWeb Speech APIï¼‰
- [x] æ·»åŠ é«˜å¯¹æ¯”åº¦ä¸»é¢˜ï¼ˆWCAG 2.1 AAçº§åˆè§„ï¼‰
- [x] å®ç°é”®ç›˜å¯¼èˆªå’ŒARIAæ— éšœç¢æ ‡ç­¾
- [x] æ·»åŠ è§¦è§‰åé¦ˆæ”¯æŒï¼ˆVibration APIï¼‰
- [x] åˆ›å»ºæ— éšœç¢è®¾ç½®é¢æ¿

### v1.0.0 (2024-12-24)

- [x] é¡¹ç›®åˆå§‹åŒ–ï¼Œæ­å»ºSpring Boot + MyBatis-Plusæ¡†æ¶
- [x] åˆ›å»º13ä¸ªæ ¸å¿ƒæ•°æ®è¡¨ï¼ˆç”¨æˆ·ã€å…¬äº¤è·¯çº¿ã€å…¬å‘Šã€ç•™è¨€ç­‰ï¼‰
- [x] å®ç°12ä¸ªæœåŠ¡å±‚æ¨¡å—ï¼ˆService + ServiceImplï¼‰
- [x] å®ŒæˆDockerå®¹å™¨åŒ–éƒ¨ç½²é…ç½®
- [x] å®ç°ç®¡ç†åå°ä¸å‰å°ç”¨æˆ·ç•Œé¢
- [x] GitHubä»“åº“åˆ›å»ºå¹¶æ¨é€ä»£ç 

---

## æ¼”ç¤ºåŠŸèƒ½è§„åˆ’

### å·²å®ç°åŠŸèƒ½ âœ…

| æ¨¡å— | åŠŸèƒ½ | çŠ¶æ€ |
|------|------|------|
| **ç”¨æˆ·ç³»ç»Ÿ** | æ³¨å†Œ/ç™»å½•ã€ä¸ªäººä¸­å¿ƒã€æƒé™ç®¡ç† | âœ… |
| **è·¯çº¿æŸ¥è¯¢** | æŒ‰åç§°/èµ·ç‚¹/ç»ˆç‚¹/ç«™ç‚¹æœç´¢ | âœ… |
| **åœ°å›¾å¯è§†åŒ–** | é«˜å¾·ä¼˜å…ˆ + Leafletå…œåº•ï¼Œè·¯çº¿ç»˜åˆ¶ã€ç«™ç‚¹æ ‡æ³¨ | âœ… |
| **å®æ—¶ä½ç½®æ›´æ–°** | WebSocketæ¨é€è½¦è¾†ä½ç½®ï¼ˆå¤±è´¥è‡ªåŠ¨é™çº§å®šæ—¶æ¨¡æ‹Ÿï¼‰ | âœ… |
| **å†…å®¹ç®¡ç†** | å…¬äº¤è·¯çº¿ã€å…¬å‘Šã€å‹æƒ…é“¾æ¥CRUD | âœ… |
| **ç¤¾äº¤äº’åŠ¨** | è¯„è®ºã€ç‚¹èµ/è¸©ã€æ”¶è—ã€ç•™è¨€ | âœ… |
| **åå°ç®¡ç†** | å®Œæ•´çš„ç®¡ç†åå°ç•Œé¢ | âœ… |
| **â™¿ æ— éšœç¢åŠŸèƒ½** | | |
| â”œâ”€ è·¯çº¿è¯„åˆ† | èåˆæ— éšœç¢æƒé‡çš„æ™ºèƒ½æ¨èç®—æ³• | âœ… |
| â”œâ”€ è¯­éŸ³æ’­æŠ¥ | Web Speech APIè¯­éŸ³åˆæˆ | âœ… |
| â”œâ”€ é«˜å¯¹æ¯”åº¦ | WCAG 2.1 AAçº§ä¸»é¢˜ | âœ… |
| â”œâ”€ é”®ç›˜å¯¼èˆª | Alt+æ•°å­—é”®å¿«æ·è®¿é—® | âœ… |
| â”œâ”€ è§¦è§‰åé¦ˆ | Vibration APIéœ‡åŠ¨åé¦ˆ | âœ… |
| â””â”€ å±å¹•é˜…è¯»å™¨ | å®Œæ•´ARIAæ ‡ç­¾æ”¯æŒ | âœ… |

### å¾…å®ç°åŠŸèƒ½ ğŸš§

ä»¥ä¸‹åŠŸèƒ½åœ¨READMEä¸­æœ‰è§„åˆ’æè¿°ï¼Œä½†å½“å‰ç‰ˆæœ¬**å°šæœªå®ç°**ï¼š

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| **é«˜å¾·WebæœåŠ¡ç»“æœæ·±åº¦èåˆ** | å·²æ¥å…¥åç«¯ driving/geocode/regeoï¼Œå¾…ä¸æ¨èç®—æ³•å’Œä¸šåŠ¡è§„åˆ™è¿›ä¸€æ­¥èåˆ |
| **æ™ºèƒ½æ¢ä¹˜è§„åˆ’** | éœ€è¦Dijkstra/A*ç­‰å›¾è®ºç®—æ³•å®ç°çœŸæ­£çš„å¤šæ–¹æ¡ˆæ¢ä¹˜ |
| **ç¦»çº¿ç“¦ç‰‡æ•°æ®å‡†å¤‡ï¼ˆå¯é€‰ï¼‰** | å·²æ”¯æŒç¦»çº¿æ¨¡å¼åˆ‡æ¢ï¼Œå¾…è¡¥å……ç¨³å®šå¯ç”¨çš„æœ¬åœ°ç“¦ç‰‡æ•°æ®åŒ… |

---

## æœ€ç»ˆå®Œæˆç›®æ ‡ï¼ˆæ¯•ä¸šè®¾è®¡éªŒæ”¶ç‰ˆï¼‰

> ç›®æ ‡ç‰ˆæœ¬ï¼š`v3.0.0`ï¼ˆç­”è¾©éªŒæ”¶ç‰ˆï¼‰
>
> åœ°å›¾ç­–ç•¥ï¼š**é«˜å¾·åœ°å›¾ API ä¸ºä¸»ï¼Œç¦»çº¿åœ°å›¾ä¸ºå…œåº•**

### åœ°å›¾èƒ½åŠ›é€‰å‹è¯´æ˜ï¼ˆ2026-02-18æ ¸éªŒï¼‰

åŸºäºé«˜å¾·å¼€æ”¾å¹³å°å®˜æ–¹æ–‡æ¡£æ ¸éªŒï¼š

- WebæœåŠ¡ API æ–‡æ¡£æ˜ç¡®è¯´æ˜ï¼š`å¯¹æ‰€æœ‰ç”¨æˆ·å¼€æ”¾`ï¼Œä½†éœ€è¦ç”³è¯·åº”ç”¨ `Key`ï¼Œå¹¶å—æµé‡é™åˆ¶ç­–ç•¥ç®¡ç†ã€‚
- JS API 2.0 æ–‡æ¡£æ˜ç¡®è¯´æ˜ï¼š2021-12-02åç”³è¯·çš„ Key éœ€è¦é…åˆå®‰å…¨å¯†é’¥ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®é€šè¿‡ä»£ç†æ–¹å¼ï¼ˆ`serviceHost + jscode`ï¼‰æ¥å…¥ã€‚

å› æ­¤æœ¬é¡¹ç›®åœ°å›¾èƒ½åŠ›çš„æœ€ç»ˆç›®æ ‡å®šä¹‰ä¸ºï¼š

1. **ä¼˜å…ˆæ¥å…¥é«˜å¾·åœ°å›¾ APIï¼ˆä¸»æ–¹æ¡ˆï¼‰**ï¼šæ»¡è¶³å¼€é¢˜æŠ¥å‘Šä¸­â€œåœ°å›¾å±•ç¤ºä¸è·¯å¾„è§„åˆ’æœåŠ¡é›†æˆâ€çš„ç›®æ ‡ã€‚  
2. **åŒæ—¶ä¿ç•™ç¦»çº¿åœ°å›¾å…œåº•ï¼ˆå¤‡é€‰æ–¹æ¡ˆï¼‰**ï¼šå½“éƒ¨ç½²ç¯å¢ƒæ— æ³•ç¨³å®šè®¿é—®çº¿ä¸Šåœ°å›¾æœåŠ¡æˆ–å­˜åœ¨ç½‘ç»œç­–ç•¥é™åˆ¶æ—¶ï¼Œåˆ‡æ¢æœ¬åœ°ç“¦ç‰‡æ–¹æ¡ˆï¼Œä¿è¯ç³»ç»Ÿå¯æ¼”ç¤ºã€å¯äº¤ä»˜ã€‚

å½“å‰å‰ç«¯åœ°å›¾æ¸²æŸ“å®ç°ç»†åˆ™ï¼š

1. æ•°æ®æºåæ ‡æŒ‰ `dataCoordinateSystem` è§£æï¼ˆé»˜è®¤ `wgs84`ï¼‰ï¼Œåœ¨é«˜å¾·æ¨¡å¼ä¸‹è‡ªåŠ¨è½¬æ¢ä¸º `GCJ-02` åå†æ¸²æŸ“ã€‚  
2. è·¯çº¿è½¨è¿¹ä¼˜å…ˆçº§ä¸º `AMap.LineSearch` å…¬äº¤å®˜æ–¹è½¨è¿¹ï¼Œå…¶æ¬¡ `luxianguiji`ï¼Œæœ€åæ‰å›é€€ç«™ç‚¹ç›´è¿ã€‚  
3. ç«™ç‚¹ç‚¹å‡»ã€è½¦è¾†ä½ç½®ã€è·¯å¾„è§„åˆ’èµ·ç»ˆç‚¹ç»Ÿä¸€ä½¿ç”¨åŒä¸€å¥—é«˜å¾·åæ ‡ï¼Œç¡®ä¿å¯è§†åŒ–ä¸€è‡´æ€§ã€‚  

### éªŒæ”¶ç›®æ ‡æ¸…å•ï¼ˆå¿…é¡»å®Œæˆï¼‰

| æ¨¡å— | æœ€ç»ˆç›®æ ‡ | éªŒæ”¶æ ‡å‡† |
|------|----------|----------|
| åœ°å›¾å±•ç¤º | é«˜å¾·JS APIåœ°å›¾æ›¿æ¢å½“å‰OSMæ–¹æ¡ˆ | é¦–é¡µ/åœ°å›¾é¡µå¯æ­£å¸¸åŠ è½½ï¼Œæ”¯æŒç¼©æ”¾ã€å¹³ç§»ã€æ ‡æ³¨ |
| è·¯çº¿è§„åˆ’ | æ¥å…¥é«˜å¾·è·¯å¾„è§„åˆ’APIå¹¶è¿”å›å¯è§†åŒ–è·¯çº¿ | è¾“å…¥èµ·ç»ˆç‚¹åå¯è¿”å›è‡³å°‘1æ¡å¯è¡Œè·¯çº¿ |
| æ™ºèƒ½æ¨è | æ— éšœç¢è¯„åˆ†ä¸è·¯çº¿æ¨èå½¢æˆå‰åç«¯é—­ç¯ | å‰ç«¯å¯è°ƒç”¨`/route/plan`å¹¶æ˜¾ç¤ºæ’åºç»“æœä¸æ¨èç†ç”± |
| å®æ—¶èƒ½åŠ› | æ¨¡æ‹Ÿè½®è¯¢å‡çº§ä¸ºWebSocketæ¨é€æœºåˆ¶ | åœ°å›¾è½¦è¾†ä½ç½®å¯é€šè¿‡æ¨é€æ›´æ–°ï¼ˆéå®šæ—¶å™¨æœ¬åœ°è‡ªå¢ï¼‰ |
| ETAé¢„æµ‹ | æä¾›å¯è§£é‡Šçš„åˆ°ç«™ä¼°ç®—æ¨¡å‹å¹¶å‰ç«¯å¯è§†å±•ç¤º | è¿”å›ETAåˆ†é’Ÿã€é¢„è®¡åˆ°è¾¾æ—¶åˆ»ã€è·¯å†µç­‰çº§ã€å‰©ä½™é‡Œç¨‹ã€å‡é€Ÿ |
| æ— éšœç¢äº¤äº’ | ä¿®å¤å¹¶æ‰“é€šè¯­éŸ³ã€é«˜å¯¹æ¯”åº¦ã€é”®ç›˜å¯¼èˆª | è®¾ç½®é¡µå¼€å…³å¯ç”¨ï¼Œæ— JSæŠ¥é”™ï¼Œå¯åœ¨ä¸»é¡µé¢ç”Ÿæ•ˆ |
| æ•°æ®å¯¼å‡º | å¢åŠ è·¯çº¿/ç»Ÿè®¡å¯¼å‡ºèƒ½åŠ› | åå°æ”¯æŒå¯¼å‡ºExcelï¼Œå¯¼å‡ºæ–‡ä»¶å¯æ‰“å¼€ |
| ç¦»çº¿å…œåº• | æä¾›ç¦»çº¿åœ°å›¾åˆ‡æ¢èƒ½åŠ›ï¼ˆé…ç½®çº§ï¼‰ | å…³é—­çº¿ä¸Šåœ°å›¾åå¯åˆ‡æ¢ç¦»çº¿ç“¦ç‰‡å¹¶ç»§ç»­æ¼”ç¤º |

### å½“å‰å®Œæˆè¿›åº¦ï¼ˆ2026-02-18ï¼‰

| ç›®æ ‡é¡¹ | å½“å‰çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| åœ°å›¾å±•ç¤ºï¼ˆé«˜å¾·ä¸»æ–¹æ¡ˆï¼‰ | âœ… å·²å®Œæˆï¼ˆå·²è”è°ƒï¼‰ | å·²é…ç½® `amapKey + securityJsCode`ï¼Œå¹¶å¢åŠ  `WGS84->GCJ` è½¬æ¢ä¸ `LineSearch` è½¨è¿¹ä¼˜å…ˆæ¸²æŸ“ï¼Œå¤±è´¥è‡ªåŠ¨é™çº§ Leaflet |
| è·¯çº¿è§„åˆ’ï¼ˆé«˜å¾·è·¯å¾„ï¼‰ | âœ… åŸºç¡€æ¥å…¥å®Œæˆ | å·²æ¥å…¥åç«¯`/map/amap/driving`å¹¶å‰ç«¯è°ƒç”¨ï¼Œå¾…èåˆä¸šåŠ¡ç­–ç•¥ä¸æ¢ä¹˜è§„åˆ™ |
| æ™ºèƒ½æ¨èé—­ç¯ | âœ… å·²å®Œæˆ | å‰ç«¯å·²æ¥å…¥`/route/plan`å¹¶å±•ç¤ºæ’åºã€è¯„åˆ†ä¸æ¨èç†ç”± |
| æ— éšœç¢äº¤äº’é—­ç¯ | âœ… å·²å®Œæˆï¼ˆæœ¬è½®ä¿®å¤ï¼‰ | è®¾ç½®é¡µé«˜å¯¹æ¯”åº¦å¼€å…³å·²ä¿®å¤ï¼Œé¿å…JSæ–¹æ³•ä¸å­˜åœ¨æŠ¥é”™ |
| WebSocketå®æ—¶æ¨é€ | âœ… å·²å®Œæˆï¼ˆå«å…œåº•ï¼‰ | å·²æ¥å…¥`/ws/vehicle`ï¼Œè¿æ¥å¤±è´¥è‡ªåŠ¨å›é€€å‰ç«¯æ¨¡æ‹Ÿ |
| ETAé¢„æµ‹ | âœ… å·²å®Œæˆï¼ˆç²¾ç»†åŒ–æ¨¡å‹ï¼‰ | `/map/eta/{id}` å·²è¿”å›å‰©ä½™è·ç¦»ã€è·¯å†µç­‰çº§ã€å‡é€Ÿä¸åˆ°ç«™æ—¶é—´ï¼Œå‰ç«¯åŒæ­¥å±•ç¤º |
| æ•°æ®å¯¼å‡ºExcel | âœ… å·²å®Œæˆ | åå°å·²æ”¯æŒæŒ‰å½“å‰ç­›é€‰æ¡ä»¶å¯¼å‡º`gongjiaoluxian-export.xlsx` |
| ç¦»çº¿åœ°å›¾åˆ‡æ¢ | âœ… å·²å®Œæˆï¼ˆé…ç½®çº§ï¼‰ | å·²æ”¯æŒ `leafletTileMode` ä¸ `leafletOfflineTileUrl` é…ç½®åˆ‡æ¢ |

### ä¸‹ä¸€é˜¶æ®µä»»åŠ¡ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰

1. å°†é«˜å¾· Web æœåŠ¡ç»“æœä¸`/route/plan`æ¨èç®—æ³•èåˆï¼ˆæ—¶é—´ã€è·¯å†µã€æ— éšœç¢è¯„åˆ†è”åˆæ’åºï¼‰ã€‚  
2. å®ç°å¤šæ–¹æ¡ˆæ¢ä¹˜è§„åˆ’ï¼ˆDijkstra/A*ï¼‰å¹¶åœ¨å‰å°å±•ç¤ºå€™é€‰æ–¹æ¡ˆä¸æ¢ä¹˜è¯´æ˜ã€‚  
3. å¢åŠ å¯¼å‡ºèƒ½åŠ›å›å½’æµ‹è¯•ä¸ç»Ÿè®¡æŠ¥è¡¨å¯¼å‡ºï¼ˆå®¢æµã€æ— éšœç¢è®¾æ–½è¦†ç›–ç‡ï¼‰ã€‚  
4. åœ¨å¯æ§æ—¶é—´å†…è¡¥é½ç¦»çº¿ç“¦ç‰‡æ•°æ®åŒ…ï¼ˆä½œä¸ºæ¼”ç¤ºå…œåº•ï¼Œä¸é˜»å¡ä¸»çº¿å¼€å‘ï¼‰ã€‚  

### éç›®æ ‡ï¼ˆæœ¬æ¬¡ä¸å¼ºåˆ¶ï¼‰

- å¾®æœåŠ¡æ‹†åˆ†ã€åˆ†å¸ƒå¼é›†ç¾¤ã€å¤æ‚AIé¢„æµ‹æ¨¡å‹è®­ç»ƒã€‚
- çœŸå®å…¬äº¤å…¬å¸ç”Ÿäº§çº§æ•°æ®æ¥å…¥ï¼ˆå¯ç”¨æ¨¡æ‹Ÿæˆ–å…¬å¼€æ ·ä¾‹æ•°æ®æ›¿ä»£ï¼‰ã€‚

### ç¦»çº¿åœ°å›¾é…ç½®ç¤ºä¾‹

åœ¨ `src/main/resources/front/front/js/config.js` ä¸­è®¾ç½®ï¼š

```javascript
var mapEngineConfig = {
  provider: 'leaflet',
  leafletTileMode: 'offline',
  leafletOfflineTileUrl: '/springbootmf383/front/tiles/{z}/{x}/{y}.png',
  leafletMinZoom: 3,
  leafletMaxZoom: 19
}
```

ç¦»çº¿ç“¦ç‰‡é»˜è®¤ç›®å½•å»ºè®®æ”¾åœ¨ï¼š

- `src/main/resources/front/front/tiles/{z}/{x}/{y}.png`

### ç¦»çº¿ç“¦ç‰‡éƒ¨ç½²ä¸æ ¡éªŒå‘½ä»¤

```bash
# 1) éƒ¨ç½²ç¦»çº¿ç“¦ç‰‡ï¼ˆç›®å½•æˆ–å‹ç¼©åŒ…ï¼‰
bash scripts/offline-map-deploy.sh /mnt/e/offline-tiles --clean

# 2) ä¸€é”®æ ¡éªŒç¦»çº¿åœ°å›¾é…ç½®ä¸ç“¦ç‰‡æ•°æ®
bash scripts/offline-map-check.sh
```

è¯´æ˜ï¼š

- `offline-map-deploy.sh` æ”¯æŒç›®å½•ã€`.zip`ã€`.tar`ã€`.tar.gz`ã€`.tgz`ã€‚  
- æ ¡éªŒè„šæœ¬ä¼šæ£€æŸ¥ï¼š
  - `leafletTileMode` ä¸ `leafletOfflineTileUrl` é…ç½®æ˜¯å¦å­˜åœ¨ï¼›
  - åœ°å›¾é¡µæ˜¯å¦åŒ…å«ç¦»çº¿/åœ¨çº¿åˆ‡æ¢é€»è¾‘ï¼›
  - `front/tiles` æ˜¯å¦å­˜åœ¨ä¸”åŒ…å« `*.png` ç“¦ç‰‡ã€‚

---

## æ•°æ®æ¥æºä¸è®¸å¯

### å…¬äº¤çº¿è·¯ä¸ç«™ç‚¹æ¥æº

- è·¯çº¿/ç«™ç‚¹æ•°æ®æ¥æºï¼š**OpenStreetMapï¼ˆOSMï¼‰å¹¿å·å…¬äº¤å…³ç³»æ•°æ®**
- æŠ“å–æ–¹å¼ï¼šOverpass APIï¼ˆ`network=å¹¿å·å…¬äº¤` + æŒ‡å®š relation idï¼‰
- æœ¬æ¬¡é‡‡é›†æ—¥æœŸï¼š**2026-02-18**
- è®¸å¯ï¼š**ODbLï¼ˆOpen Database Licenseï¼‰**

### æœ¬æ¬¡ä½¿ç”¨çš„ OSM Relation

- `6503210`ï¼ˆ1è·¯ï¼šä¸œå±±ç½²å‰è·¯æ€»ç«™ -> èŠ³æ‘èŠ±å›­å—é—¨æ€»ç«™ï¼‰
- `6517716`ï¼ˆ3è·¯ï¼šå¦‚æ„åŠæ€»ç«™ -> ä¸œå±±é¾Ÿå²—æ€»ç«™ï¼‰
- `6560976`ï¼ˆ10è·¯ï¼šæ’ç¦è·¯æ€»ç«™ -> æ˜Œå²—è·¯æ€»ç«™ï¼‰
- `6576283`ï¼ˆ16è·¯ï¼šå¤©å¹³æ¶æ€»ç«™ -> å‡¤å‡°å²—æ€»ç«™ï¼‰
- `6596555`ï¼ˆ31è·¯ï¼šè§£æ”¾åŒ—è·¯æ€»ç«™ï¼ˆåº”å…ƒè·¯å£ï¼‰-> å—çŸ³è¥¿æ€»ç«™ï¼‰

### è¯´æ˜

- `zhandian_wuzhangai` ä¸­çš„ç«™ç‚¹åç§°ä¸ç»çº¬åº¦æ¥è‡ª OSM èŠ‚ç‚¹ï¼›æ— éšœç¢ç»†é¡¹ï¼ˆå¦‚å‡é™å°ã€ç›²é“ï¼‰ä¼˜å…ˆè¯»å–èŠ‚ç‚¹æ ‡ç­¾ï¼ˆ`wheelchair`ã€`tactile_paving` ç­‰ï¼‰ï¼Œç¼ºå¤±é¡¹ä»¥ä¿å®ˆé»˜è®¤å€¼å¡«å……ï¼Œç”¨äºæ¼”ç¤ºå’Œç®—æ³•éªŒè¯ã€‚

---

## æŠ€æœ¯æ¶æ„

### åç«¯æŠ€æœ¯æ ˆ

```
Spring Boot 2.2.2.RELEASE
â”œâ”€â”€ MyBatis-Plus 2.3        # ORMæ¡†æ¶
â”œâ”€â”€ MySQL 8.0               # æ•°æ®åº“
â”œâ”€â”€ Shiro 1.3.2             # æƒé™ç®¡ç†
â””â”€â”€ Hutool 4.0.12           # å·¥å…·ç±»åº“
```

### å‰ç«¯æŠ€æœ¯æ ˆ

```
ç®¡ç†åå°ï¼šVue.js + ElementUI
å‰å°é¡µé¢ï¼šjQuery + Bootstrap + Layui
åœ°å›¾ç»„ä»¶ï¼šé«˜å¾·JS APIï¼ˆä¸»ï¼‰ + Leafletï¼ˆé™çº§å…œåº•ï¼‰
â™¿ æ— éšœç¢ï¼šWeb Speech API + Vibration API + ARIA
```

### ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ·å±‚                             â”‚
â”‚  ç®¡ç†åå°(Vue)  â”‚  å‰å°é¡µé¢(jQuery)  â”‚  â™¿æ— éšœç¢è®¾ç½®   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   è¡¨ç°å±‚                              â”‚
â”‚  åœ°å›¾(é«˜å¾·/LeafletåŒå¼•æ“)  â”‚  â™¿è¯­éŸ³/ä¸»é¢˜/é”®ç›˜           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   APIç½‘å…³å±‚                           â”‚
â”‚        RESTful API                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   ä¸šåŠ¡é€»è¾‘å±‚                          â”‚
â”‚  Serviceå±‚  â”‚  æ— éšœç¢è·¯çº¿è¯„åˆ†ç®—æ³•                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æ•°æ®è®¿é—®å±‚                          â”‚
â”‚        MyBatis-Plus  â”‚  DAOå±‚ (14ä¸ªMapper)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   æ•°æ®å­˜å‚¨å±‚                          â”‚
â”‚         MySQL 8.0 (å«æ— éšœç¢æ•°æ®)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æ ¸å¿ƒæ¨¡å—è®¾è®¡

### 1. åœ°å›¾å¯è§†åŒ–æ¨¡å—

```javascript
// æŠ€æœ¯é€‰å‹ï¼šé«˜å¾·JS APIï¼ˆä¸»ï¼‰+ Leafletï¼ˆå…œåº•ï¼‰
// ä¼˜åŠ¿ï¼šåœ¨çº¿èƒ½åŠ›å®Œå–„ï¼Œå¼‚å¸¸æ—¶å¯è‡ªåŠ¨é™çº§ä¿è¯å¯ç”¨æ€§

æ ¸å¿ƒåŠŸèƒ½ï¼š
â”œâ”€â”€ åœ°å›¾åˆå§‹åŒ–
â”‚   â”œâ”€â”€ è®¾ç½®ä¸­å¿ƒç‚¹å’Œç¼©æ”¾çº§åˆ«
â”‚   â”œâ”€â”€ åŠ è½½é«˜å¾·åº•å›¾ï¼ˆå¤±è´¥è‡ªåŠ¨é™çº§Leafletï¼‰
â”‚   â””â”€â”€ è‡ªå®šä¹‰åœ°å›¾æ ·å¼
â”œâ”€â”€ è·¯çº¿ç»˜åˆ¶
â”‚   â”œâ”€â”€ æ ¹æ®ç«™ç‚¹åæ ‡ç»˜åˆ¶Polyline
â”‚   â”œâ”€â”€ è®¾ç½®çº¿è·¯é¢œè‰²å’Œæ ·å¼
â”‚   â””â”€â”€ æ·»åŠ çº¿è·¯æ ‡ç­¾
â”œâ”€â”€ ç«™ç‚¹æ ‡æ³¨
â”‚   â”œâ”€â”€ Markeræ ‡è®°
â”‚   â”œâ”€â”€ Popupä¿¡æ¯çª—å£
â”‚   â””â”€â”€ ç«™ç‚¹å›¾æ ‡æ ·å¼
â””â”€â”€ è½¦è¾†æ ‡æ³¨
    â”œâ”€â”€ æ¨¡æ‹Ÿä½ç½®æ›´æ–°
    â”œâ”€â”€ æ–¹å‘ç®­å¤´
    â””â”€â”€ ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…
```

### 2. å®æ—¶ä½ç½®æ›´æ–°æ¨¡å—

```javascript
// æ¼”ç¤ºæ–¹æ¡ˆï¼šWebSocketå®æ—¶æ¨é€ + å®šæ—¶å™¨å…œåº•
// ä¼˜åŠ¿ï¼šä¼˜å…ˆå®æ—¶ï¼Œç½‘ç»œå¼‚å¸¸æ—¶ä»å¯ä¿æŒæ¼”ç¤ºè¿ç»­æ€§

å®ç°æ€è·¯ï¼š
â”œâ”€â”€ æ•°æ®å‡†å¤‡
â”‚   â”œâ”€â”€ ä»è·¯çº¿æ•°æ®è·å–ç«™ç‚¹åæ ‡åˆ—è¡¨
â”‚   â””â”€â”€ å®šä¹‰è½¦è¾†åˆå§‹ä½ç½®
â”œâ”€â”€ å®æ—¶æ›´æ–°
â”‚   â”œâ”€â”€ WebSocketæ¥æ”¶åç«¯æ¨é€
â”‚   â”œâ”€â”€ è¿æ¥å¤±è´¥è‡ªåŠ¨åˆ‡æ¢åˆ°2ç§’å®šæ—¶å™¨æ¨¡æ‹Ÿ
â”‚   â””â”€â”€ æŒ‰ç«™ç‚¹åºåˆ—æ›´æ–°è½¦è¾†Markerä½ç½®
â””â”€â”€ åˆ°ç«™æç¤º
    â”œâ”€â”€ æ›´æ–°Popupä¿¡æ¯
    â””â”€â”€ å¾ªç¯æ’­æ”¾
```

### 3. æ— éšœç¢è·¯çº¿è¯„åˆ†æ¨¡å—

```java
// ç®—æ³•ï¼šèåˆæ— éšœç¢æƒé‡çš„ç»¼åˆè¯„åˆ†
// æ¼”ç¤ºé‡ç‚¹ï¼šå±•ç¤ºå¤šå› ç´ è¯„åˆ†é€»è¾‘

è¯„åˆ†ç»´åº¦ï¼š
â”œâ”€â”€ è·¯çº¿æœ¬èº«æ— éšœç¢çº§åˆ« (40%)
â”‚   â”œâ”€â”€ å®Œå…¨æ— éšœç¢(0çº§) = 100åˆ†
â”‚   â”œâ”€â”€ åŸºæœ¬æ— éšœç¢(1çº§) = 66åˆ†
â”‚   â””â”€â”€ æœ‰éšœç¢(2-3çº§) = è¾ƒä½åˆ†æ•°
â”œâ”€â”€ é€”å¾„ç«™ç‚¹æ— éšœç¢æƒ…å†µ (30%)
â”‚   â”œâ”€â”€ å‡é™æ¢¯ã€ç›²é“ã€å•æ‰€ã€åœè½¦åœº
â”‚   â””â”€â”€ çˆ±å¿ƒåº§æ¤…æ•°é‡
â””â”€â”€ ç”¨æˆ·é€‚é…åº¦ (30%)
    â”œâ”€â”€ è§†éšœï¼šè¯­éŸ³æ’­æŠ¥ã€ç›²é“æ”¯æŒ
    â”œâ”€â”€ å¬éšœï¼šç”µå­æ˜¾ç¤ºå±
    â””â”€â”€ è‚¢éšœï¼šè½®æ¤…è®¾æ–½ã€ç”µæ¢¯
```

---

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

| ç»„ä»¶ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| JDK | 1.8+ | å¿…éœ€ |
| Maven | 3.6+ | å¿…éœ€ |
| MySQL | 8.0+ | å¿…éœ€ |
| Docker | 20.10+ | æ¨è |

### æ¨èå¯åŠ¨æµç¨‹ï¼ˆå·²éªŒè¯ï¼‰

> é€‚ç”¨äºå½“å‰ä»“åº“çš„ WSL2 + Docker Desktop å¼€å‘ç¯å¢ƒã€‚  
> ç›®æ ‡æ˜¯ä¿è¯ `http://localhost:8080` åœ¨ Windows æµè§ˆå™¨å¯ç¨³å®šè®¿é—®ã€‚

```bash
# 1) è¿›å…¥é¡¹ç›®ç›®å½•
cd /mnt/d/xx

# 2) é¦–æ¬¡æˆ–ä»£ç æ›´æ–°åæ‰“åŒ…ï¼ˆç”Ÿæˆ target/*.jarï¼‰
mvn -DskipTests package

# 3) å¯åŠ¨æœåŠ¡ï¼ˆè‡ªåŠ¨ç¡®ä¿ mysql å®¹å™¨å­˜åœ¨å¹¶æ‹‰èµ· appï¼‰
bash scripts/docker-app-up.sh

# 4) è®¿é—®ç³»ç»Ÿ
# å‰å°ï¼šhttp://localhost:8080/springbootmf383/front/index.html
# åå°ï¼šhttp://localhost:8080/springbootmf383/admin/dist/index.html
```

### åœæ­¢ä¸æ’éšœ

```bash
# åœæ­¢ app å®¹å™¨
bash scripts/docker-app-down.sh

# æŸ¥çœ‹ app æ—¥å¿—ï¼ˆæ’æŸ¥å¯åŠ¨æ…¢ã€æ•°æ®åº“è¿æ¥ç­‰é—®é¢˜ï¼‰
docker logs -f bus-route-app

# æŸ¥çœ‹å½“å‰å®¹å™¨çŠ¶æ€
docker ps --format 'table {{.Names}}\t{{.Status}}\t{{.Ports}}'
```

### å…¼å®¹å¯åŠ¨æ–¹å¼ï¼ˆå¯é€‰ï¼‰

```bash
# ä»…å¯åŠ¨æ•°æ®åº“ï¼ˆé¦–æ¬¡åˆå§‹åŒ–å¯ç”¨ï¼‰
docker compose up -d mysql

# çº¯æœ¬åœ° Java å¯åŠ¨ï¼ˆä¸ç”¨å®¹å™¨ï¼‰
mvn spring-boot:run
```

### é»˜è®¤è´¦å·

| è§’è‰² | ç”¨æˆ·å | å¯†ç  |
|------|--------|------|
| ç®¡ç†å‘˜ | `abo` | `abo` |
| æ™®é€šç”¨æˆ· | éœ€æ³¨å†Œ | éœ€æ³¨å†Œ |

---

## ç­”è¾©æ¼”ç¤ºè¦ç‚¹

### åŠŸèƒ½æ¼”ç¤ºæ¸…å•

| åºå· | åŠŸèƒ½ | æ“ä½œæ­¥éª¤ | é¢„æœŸç»“æœ | å¤‡æ³¨ |
|------|------|----------|----------|------|
| 1 | ç”¨æˆ·æ³¨å†Œ | å¡«å†™ä¿¡æ¯æäº¤ | æ³¨å†ŒæˆåŠŸï¼Œè‡ªåŠ¨ç™»å½• | |
| 2 | è·¯çº¿æŸ¥è¯¢ | è¾“å…¥"101è·¯" | æ˜¾ç¤ºè¯¥çº¿è·¯è¯¦æƒ… | |
| 3 | åœ°å›¾å±•ç¤º | ç‚¹å‡»"åœ°å›¾"æŒ‰é’® | åœ°å›¾æ˜¾ç¤ºçº¿è·¯å’Œç«™ç‚¹ | |
| 4 | å®æ—¶è½¦è¾†è¿½è¸ª | ç‚¹å‡»"å®æ—¶è½¦è¾†"æŒ‰é’® | ä¼˜å…ˆå®æ—¶æ¨é€ï¼Œå¤±è´¥è‡ªåŠ¨æ¨¡æ‹Ÿç§»åŠ¨ | å¯æ¼”ç¤ºå…œåº•æœºåˆ¶ |
| 5 | æ”¶è—åŠŸèƒ½ | ç‚¹å‡»æ”¶è— | åŠ å…¥æˆ‘çš„æ”¶è— | |
| 6 | è¯„è®ºç•™è¨€ | å‘è¡¨è¯„è®º | è¯„è®ºæˆåŠŸæ˜¾ç¤º | |
| 7 | ç®¡ç†åå° | ç™»å½•åå° | å±•ç¤ºç®¡ç†åŠŸèƒ½ | |
| **8** | â™¿ **æ— éšœç¢-è¯­éŸ³æ’­æŠ¥** | ç‚¹å‡»è¯­éŸ³æŒ‰é’® | æ’­æŠ¥è·¯çº¿ä¿¡æ¯ | |
| **9** | â™¿ **æ— éšœç¢-é«˜å¯¹æ¯”åº¦** | åˆ‡æ¢ä¸»é¢˜ | é»‘ç™½é«˜å¯¹æ¯”åº¦æ˜¾ç¤º | |
| **10** | â™¿ **æ— éšœç¢-é”®ç›˜å¯¼èˆª** | Alt+1/2/3 | å¿«é€Ÿè·³è½¬é¡µé¢ | |
| **11** | â™¿ **æ— éšœç¢-æ™ºèƒ½æ¨è** | è®¾ç½®éšœç¢æ¡£æ¡ˆ | æ˜¾ç¤ºæ— éšœç¢è¯„åˆ†æ’åº | |

### æŠ€æœ¯äº®ç‚¹è¯´æ˜

| äº®ç‚¹ | è¯´æ˜ |
|------|------|
| **å‰åç«¯åˆ†ç¦»** | Spring Boot + jQuery/Bootstrapï¼ŒRESTful APIè®¾è®¡ |
| **â™¿ WCAGåˆè§„** | ç¬¦åˆWCAG 2.1 AAçº§æ— éšœç¢æ ‡å‡† |
| **â™¿ å¤šæ¨¡æ€äº¤äº’** | è¯­éŸ³æ’­æŠ¥+è§¦è§‰åé¦ˆ+é”®ç›˜å¯¼èˆª |
| **â™¿ æ™ºèƒ½è¯„åˆ†ç®—æ³•** | èåˆæ— éšœç¢æƒé‡çš„è·¯çº¿è¯„åˆ†æ¨èç®—æ³• |
| **åœ°å›¾å¯è§†åŒ–** | é«˜å¾·JS APIä¸»æ¸²æŸ“ï¼Œå¤±è´¥è‡ªåŠ¨é™çº§Leaflet |
| **å®æ—¶æ›´æ–°** | WebSocketæ¨é€è½¦è¾†ä½ç½®ï¼Œå¤±è´¥è‡ªåŠ¨é™çº§å®šæ—¶å™¨ |
| **å“åº”å¼è®¾è®¡** | é€‚é…å¤šç§è®¾å¤‡å±å¹• |

### å¯èƒ½çš„ç­”è¾©é—®é¢˜

| é—®é¢˜ | å›ç­”è¦ç‚¹ |
|------|----------|
| å¦‚ä½•è·å–å®æ—¶æ•°æ®ï¼Ÿ | æ¼”ç¤ºç‰ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œç”Ÿäº§ç¯å¢ƒå¯å¯¹æ¥GPSæ•°æ®æº |
| åœ°å›¾ä½¿ç”¨ä»€ä¹ˆæœåŠ¡ï¼Ÿ | ä¸»æ–¹æ¡ˆä¸ºé«˜å¾·JS APIï¼Œå¼‚å¸¸æ—¶è‡ªåŠ¨é™çº§Leafletå…œåº• |
| å¦‚ä½•æ‰©å±•ï¼Ÿ | æ¨¡å—åŒ–è®¾è®¡ï¼Œé¢„ç•™æ¥å£ï¼Œæ˜“äºæ›¿æ¢æ•°æ®æº |
| **å¦‚ä½•å®ç°æ— éšœç¢ï¼Ÿ** | éµå¾ªWCAG 2.1æ ‡å‡†ï¼Œå®ç°ARIAæ ‡ç­¾ã€é”®ç›˜å¯¼èˆªã€è¯­éŸ³æ’­æŠ¥ã€é«˜å¯¹æ¯”åº¦ä¸»é¢˜ |
| **è·¯çº¿æ¨èå¦‚ä½•è€ƒè™‘æ— éšœç¢ï¼Ÿ** | è¯„åˆ†ç®—æ³•èåˆè·¯çº¿çº§åˆ«+ç«™ç‚¹è®¾æ–½+ç”¨æˆ·æ¡£æ¡ˆï¼ŒæŒ‰æ— éšœç¢è¯„åˆ†æ’åº |
| **è¯­éŸ³æ’­æŠ¥å¦‚ä½•å®ç°ï¼Ÿ** | ä½¿ç”¨Web Speech APIï¼Œæ”¯æŒè·¯çº¿å’Œç«™ç‚¹ä¿¡æ¯æ’­æŠ¥ |
| **é«˜å¯¹æ¯”åº¦ä¸»é¢˜å¦‚ä½•ä¿è¯å¯è¯»æ€§ï¼Ÿ** | ç¬¦åˆWCAG AAçº§å¯¹æ¯”åº¦è¦æ±‚ï¼ˆ4.5:1ï¼‰ï¼Œä½¿ç”¨é»‘ç™½é»„é…è‰² |

---

## é¡¹ç›®ç»“æ„

```
bus-route-query-system/
â”œâ”€â”€ src/main/java/com/
â”‚   â”œâ”€â”€ controller/        # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/          # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”œâ”€â”€ dao/              # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/           # å®ä½“ç±»
â”‚   â”œâ”€â”€ utils/            # å·¥å…·ç±»
â”‚   â””â”€â”€ config/           # é…ç½®ç±»
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ admin/            # ç®¡ç†åå°å‰ç«¯
â”‚   â”œâ”€â”€ front/            # ç”¨æˆ·å‰å°å‰ç«¯
â”‚   â””â”€â”€ application.yml   # åº”ç”¨é…ç½®
â”œâ”€â”€ images/               # é¡¹ç›®æˆªå›¾
â”œâ”€â”€ init-db.sql          # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ docker-compose.yml   # Dockeré…ç½®
â”œâ”€â”€ Dockerfile           # é•œåƒæ„å»º
â””â”€â”€ README.md            # é¡¹ç›®æ–‡æ¡£
```

---

## æ•°æ®åº“è®¾è®¡

### æ ¸å¿ƒæ•°æ®è¡¨

| è¡¨å | è¯´æ˜ | ä¸»è¦å­—æ®µ |
|------|------|----------|
| `users` | ç®¡ç†å‘˜è¡¨ | id, username, password, role |
| `yonghu` | ç”¨æˆ·è¡¨ | id, zhanghao, mima, xingming, zhangaijibie, yuyinbofang, gaoduibidu |
| `gongjiaoluxian` | å…¬äº¤è·¯çº¿è¡¨ | id, luxianbianhao, luxianmingcheng, wuzhangaijibie, yuyintongbao, mangdaozhichi |
| `zhandian_wuzhangai` | ç«™ç‚¹æ— éšœç¢ä¿¡æ¯è¡¨ | id, zhandianming, shengjiangtai, mangdao, zhuizhu, zuoweishu |
| `wangzhangonggao` | ç½‘ç«™å…¬å‘Šè¡¨ | id, biaoti, neirong, fabushijian |
| `messages` | ç•™è¨€å»ºè®®è¡¨ | id, userid, content, reply |
| `chat` | åœ¨çº¿æé—®è¡¨ | id, userid, ask, reply |

---

## æ‰©å±•æ”¹é€ æŒ‡å—

### ä»æ¼”ç¤ºç‰ˆåˆ°ç”Ÿäº§ç‰ˆ

```diff
# æ¨¡æ‹Ÿæ•°æ® â†’ çœŸå®æ•°æ®
- å®šæ—¶å™¨æ¨¡æ‹Ÿä½ç½®
+ GPSè®¾å¤‡æ•°æ®æ¥å£ + WebSocketå®æ—¶æ¨é€

# åœ¨çº¿åœ°å›¾ â†’ ç¦»çº¿åœ°å›¾
- é«˜å¾·/Leafletåœ¨çº¿æœåŠ¡
+ è‡ªå»ºç“¦ç‰‡æœåŠ¡å™¨æˆ–ä¸‹è½½ç¦»çº¿ç“¦ç‰‡

# å•æœºéƒ¨ç½² â†’ é›†ç¾¤éƒ¨ç½²
- å•æœºMySQL
+ MySQLä¸»ä» + Redisé›†ç¾¤

# ç®€å•è®¤è¯ â†’ å®Œå–„å®‰å…¨
- æ˜æ–‡å¯†ç 
+ BCryptåŠ å¯† + JWT

# è·¯çº¿è¯„åˆ† â†’ çœŸæ­£æ¢ä¹˜è§„åˆ’
- è·¯çº¿ç­›é€‰+è¯„åˆ†æ’åº
+ Dijkstra/A* å›¾è®ºç®—æ³•å®ç°å¤šç«™ç‚¹æ¢ä¹˜

# æ·»åŠ ETAé¢„æµ‹
+ å½“å‰ä¸ºâ€œè·ç¦» + è·¯å†µ + åœé â€ç²¾ç»†åŒ–ä¼°ç®—
+ ä¸‹ä¸€æ­¥å¯æ¥å…¥çœŸå®GPS/AVLæ•°æ®è¿›ä¸€æ­¥æ ¡å‡†æ¨¡å‹
```

---

## å¸¸ç”¨å‘½ä»¤

```bash
# Mavenæ“ä½œ
mvn clean package             # æ‰“åŒ…
mvn spring-boot:run           # è¿è¡Œ

# Dockeræ“ä½œ
bash scripts/docker-app-up.sh     # æ¨èï¼šå¯åŠ¨ app + mysql(è‡ªåŠ¨å…œåº•)
bash scripts/docker-app-down.sh   # åœæ­¢ app
docker logs -f bus-route-app      # æŸ¥çœ‹ app æ—¥å¿—
docker compose up -d mysql        # ä»…å¯åŠ¨æ•°æ®åº“
docker compose down               # åœæ­¢ compose ç®¡ç†çš„æœåŠ¡

# Gitæ“ä½œ
git pull origin main          # æ‹‰å–æ›´æ–°
git add . && git commit       # æäº¤æ›´æ”¹
```

---

## UIè‡ªåŠ¨å·¡æ£€ä¸è‡ªæ„ˆï¼ˆ106æœåŠ¡å™¨ï¼‰

é¡¹ç›®å†…ç½®äº† UI è‡ªåŠ¨å·¡æ£€ä¸è§„åˆ™åŒ–è‡ªæ„ˆèƒ½åŠ›ï¼š

- `ui-automation/`ï¼šPlaywright + axe å·¡æ£€ä¸è‡ªåŠ¨ä¿®å¤æ‰§è¡Œå™¨
- `scripts/ui-guardian-cron.sh`ï¼šå®šæ—¶å·¡æ£€å…¥å£
- `src/main/resources/front/front/js/accessibility.js`ï¼šè¿è¡Œæ—¶ UI è‡ªæ„ˆè§„åˆ™å¼•æ“

### ä¸€æ¬¡æ€§å®‰è£…

```bash
cd /root/dev/bus-route-query-system/ui-automation
npm install
npx playwright install chromium
```

### æ‰‹åŠ¨æ‰§è¡Œï¼ˆå·¡æ£€ + è‡ªåŠ¨ä¿®å¤ + å¤æ£€ï¼‰

```bash
cd /root/dev/bus-route-query-system/ui-automation
export PROJECT_ROOT=/root/dev/bus-route-query-system
export UI_BASE_URL=http://127.0.0.1:8133/springbootmf383/front/
node scripts/ui-guard.mjs
```

æ‰§è¡Œæµç¨‹ï¼š

1. å…ˆè·‘ UI å·¡æ£€ã€‚
2. å¤±è´¥æ—¶æ‰§è¡Œ `auto-fix-known-issues.mjs`ï¼ˆä»…ä½é£é™©ä¿®å¤ï¼‰ã€‚
3. è‹¥æœ‰ä»£ç å˜æ›´ï¼Œè‡ªåŠ¨æ„å»ºå¹¶é‡å¯ 8133 æœåŠ¡ã€‚
4. è‡ªåŠ¨äºŒæ¬¡å·¡æ£€ç¡®è®¤ä¿®å¤æ˜¯å¦ç”Ÿæ•ˆã€‚

### é…ç½®å®šæ—¶ä»»åŠ¡ï¼ˆå»ºè®®æ¯ 15 åˆ†é’Ÿï¼‰

```bash
chmod +x /root/dev/bus-route-query-system/scripts/ui-guardian-cron.sh
crontab -e
```

æ–°å¢ï¼š

```cron
*/15 * * * * /root/dev/bus-route-query-system/scripts/ui-guardian-cron.sh
```

äº§ç‰©ç›®å½•ï¼š

- æ—¥å¿—ï¼š`ui-automation/logs/ui-guardian.log`
- æŠ¥å‘Šï¼š`ui-automation/reports/ui-check-report.json`
- å¤±è´¥æˆªå›¾å’Œ traceï¼š`ui-automation/test-results/`

---

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## è”ç³»æ–¹å¼

- ä»“åº“åœ°å€ï¼šhttps://github.com/Ruler4396/bus-route-query-system
- é—®é¢˜åé¦ˆï¼š[Issues](https://github.com/Ruler4396/bus-route-query-system/issues)

---

**æ¯•ä¸šè®¾è®¡é¡¹ç›® | Powered by Spring Boot | Made with â¤ï¸ by Ruler4396**
