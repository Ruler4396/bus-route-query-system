# 城市公交在线查询系统

> 基于 Spring Boot 的毕业设计项目，提供公交线路查询、地图可视化、模拟实时追踪等核心功能演示

---

## 项目概述

本系统是一个**面向毕业设计的公交查询演示系统**，采用前后端分离架构。系统实现了公交线路查询、站点信息检索、地图可视化展示、模拟实时车辆追踪、无障碍路线评分推荐等核心功能，展示了完整的技术实现方案和可扩展的代码架构。

### 设计特点

| 特点 | 说明 |
|------|------|
| 🎓 **毕业设计** | 功能聚焦，代码清晰，适合答辩演示 |
| ♿ **无障碍友好** | 符合WCAG 2.1标准，支持视障/听障/肢障用户 |
| 🗺️ **地图展示** | 高德JS API（主）+ Leaflet（降级兜底） |
| 🎨 **精致小巧** | 核心功能精简，UI美观，交互流畅 |
| 🔧 **可扩展** | 模块化设计，易于改造为实际生产系统 |
| 📱 **响应式** | 支持PC/平板/手机多端访问 |
| 🔊 **语音播报** | 支持路线/站点信息语音播报 |

---

## 更新日志

### v2.8.5 (2026-02-18) - 高德坐标与公交线核对版

- [x] 修复高德渲染坐标偏移：新增 `WGS84 -> GCJ-02` 前端转换链路
- [x] 高德地图轨迹渲染策略升级为：`LineSearch公交官方轨迹 > luxianguiji道路轨迹 > 站点直连`
- [x] 高德模式站点、车辆、路径规划起终点统一使用转换后坐标，避免“站点落点偏移/轨迹打结”
- [x] 地图配置新增 `dataCoordinateSystem` 与 `amapLineSearchCity`（默认 `wgs84` / `广州`）

### v2.8.4 (2026-02-18) - 轨迹与站点精修版

- [x] 路线轨迹改为 OSRM 基于站序的道路重建（非站点直连）
- [x] 站点坐标默认道路吸附，吸附偏差过大（>40m）时保留原始站点坐标
- [x] 广州真实线路数据已重新入库（5条线路、93站）

### v2.8.3 (2026-02-18) - 站点纠偏与道路轨迹版

- [x] 修复部分站点落在园区/景点内部的问题（站点坐标纠偏到道路）
- [x] 新增路线轨迹字段 `luxianguiji`（OSM道路折线）
- [x] 地图页连线由“站点直连”改为“道路轨迹渲染”
- [x] 广州 5 条真实线路已同步轨迹数据并通过接口校验

### v2.8.2 (2026-02-18) - 广州真实公交数据替换版

- [x] 使用 OpenStreetMap / Overpass API 真实公交关系数据替换演示线路
- [x] 线路替换为广州 `1路`、`3路`、`10路`、`16路`、`31路`（单向）
- [x] 同步更新站点坐标与站点无障碍基础信息（93站）
- [x] 运行中数据库已完成刷新并通过接口校验

### v2.8.1 (2026-02-18) - 广州示例数据切换版

- [x] 默认公交示例数据由上海切换为广州（5条线路）
- [x] 无障碍站点示例数据同步切换为广州（49个站点）
- [x] 已验证运行中数据库数据刷新完成（路线与站点一致）

### v2.8.0 (2026-02-18) - 高德Web服务后端接入版

- [x] 新增后端高德路径规划接口：`GET /map/amap/driving`
- [x] 新增后端地理编码接口：`GET /map/amap/geocode`
- [x] 新增后端逆地理编码接口：`GET /map/amap/regeo`
- [x] 地图页“高德路径”改为优先走后端接口，失败自动回退前端JS插件
- [x] 支持 Leaflet 与 高德 双引擎展示统一路径结果

### v2.7.0 (2026-02-18) - ETA精细化版

- [x] 升级ETA模型：由固定站数估算改为“剩余距离 + 时段路况 + 停靠时长”
- [x] 优先使用 `zhandianzuobiao` 坐标累计距离，缺失时自动回退站数模型
- [x] ETA接口新增可解释字段：`remainingDistanceKm`、`trafficLevel`、`avgSpeedKmh`、`modelType` 等
- [x] 地图页ETA展示新增“剩余公里数/路况/均速”信息

### v2.6.0 (2026-02-18) - 高德密钥联调版

- [x] 接入高德 Web JS API Key
- [x] 接入高德安全密钥 `securityJsCode`
- [x] 地图默认引擎切换为 `gaode`，加载失败自动降级 Leaflet

### v2.5.0 (2026-02-18) - 离线地图切换版

- [x] 地图配置新增 `leafletTileMode`（`online/offline`）切换
- [x] 支持离线瓦片地址配置：`leafletOfflineTileUrl`
- [x] Leaflet 初始化时按配置自动选择在线/离线瓦片源
- [x] 地图状态栏显示当前 Leaflet 瓦片模式（在线瓦片/离线瓦片）

### v2.4.0 (2026-02-18) - 后台导出闭环版

- [x] 新增后端导出接口：`GET /gongjiaoluxian/export`
- [x] 支持按后台筛选条件导出线路数据（名称/起点/途经站点/终点）
- [x] 管理后台“公交路线”列表新增“导出Excel”按钮
- [x] 导出文件名与格式统一为：`gongjiaoluxian-export.xlsx`

### v2.3.0 (2026-02-18) - 实时推送替换版

- [x] 新增后端WebSocket端点：`/ws/vehicle?routeId={id}`
- [x] 新增车辆位置定时推送任务（默认2秒一帧）
- [x] 地图页接入WebSocket实时车辆位置更新
- [x] 推送失败自动降级到前端定时器模拟，保证演示连续性
- [x] 鉴权拦截器放行`/ws/**`握手路径
- [x] 新增ETA接口`/map/eta/{id}`与地图页实时展示（简化估算模型）

### v2.2.0 (2026-02-18) - 地图引擎双栈接入版

- [x] 地图页支持双引擎：`高德优先 + Leaflet兜底`
- [x] 新增地图引擎配置项`mapEngineConfig`（`auto/gaode/leaflet`）
- [x] 新增地图页引擎状态提示，支持高德加载失败自动降级
- [x] 新增“高德路径”按钮（基于高德`Driving`插件）
- [ ] 待补充生产环境高德Key与安全配置（`securityJsCode/serviceHost`）

### v2.1.0 (2026-02-18) - 路线推荐前端闭环版

- [x] 前台“公交路线”页接入`/route/plan`接口
- [x] 支持推荐偏好切换（AUTO/ACCESSIBLE/TIME/DISTANCE）
- [x] 展示推荐分、无障碍分、推荐理由
- [x] 增加推荐流程空态/异常态提示（参数缺失、接口失败、无结果）
- [x] 修复无障碍设置页高对比度开关调用异常（`enableHighContrast/disableHighContrast`）

### v2.0.0 (2026-02-04) - 无障碍功能增强版

- [x] 新增无障碍设施数据模型（公交路线、站点、用户档案）
- [x] 实现无障碍路线规划算法（智能推荐+手动切换）
- [x] 集成语音播报功能（Web Speech API）
- [x] 添加高对比度主题（WCAG 2.1 AA级合规）
- [x] 实现键盘导航和ARIA无障碍标签
- [x] 添加触觉反馈支持（Vibration API）
- [x] 创建无障碍设置面板

### v1.0.0 (2024-12-24)

- [x] 项目初始化，搭建Spring Boot + MyBatis-Plus框架
- [x] 创建13个核心数据表（用户、公交路线、公告、留言等）
- [x] 实现12个服务层模块（Service + ServiceImpl）
- [x] 完成Docker容器化部署配置
- [x] 实现管理后台与前台用户界面
- [x] GitHub仓库创建并推送代码

---

## 演示功能规划

### 已实现功能 ✅

| 模块 | 功能 | 状态 |
|------|------|------|
| **用户系统** | 注册/登录、个人中心、权限管理 | ✅ |
| **路线查询** | 按名称/起点/终点/站点搜索 | ✅ |
| **地图可视化** | 高德优先 + Leaflet兜底，路线绘制、站点标注 | ✅ |
| **实时位置更新** | WebSocket推送车辆位置（失败自动降级定时模拟） | ✅ |
| **内容管理** | 公交路线、公告、友情链接CRUD | ✅ |
| **社交互动** | 评论、点赞/踩、收藏、留言 | ✅ |
| **后台管理** | 完整的管理后台界面 | ✅ |
| **♿ 无障碍功能** | | |
| ├─ 路线评分 | 融合无障碍权重的智能推荐算法 | ✅ |
| ├─ 语音播报 | Web Speech API语音合成 | ✅ |
| ├─ 高对比度 | WCAG 2.1 AA级主题 | ✅ |
| ├─ 键盘导航 | Alt+数字键快捷访问 | ✅ |
| ├─ 触觉反馈 | Vibration API震动反馈 | ✅ |
| └─ 屏幕阅读器 | 完整ARIA标签支持 | ✅ |

### 待实现功能 🚧

以下功能在README中有规划描述，但当前版本**尚未实现**：

| 功能 | 说明 |
|------|------|
| **高德Web服务结果深度融合** | 已接入后端 driving/geocode/regeo，待与推荐算法和业务规则进一步融合 |
| **智能换乘规划** | 需要Dijkstra/A*等图论算法实现真正的多方案换乘 |
| **离线瓦片数据准备（可选）** | 已支持离线模式切换，待补充稳定可用的本地瓦片数据包 |

---

## 最终完成目标（毕业设计验收版）

> 目标版本：`v3.0.0`（答辩验收版）
>
> 地图策略：**高德地图 API 为主，离线地图为兜底**

### 地图能力选型说明（2026-02-18核验）

基于高德开放平台官方文档核验：

- Web服务 API 文档明确说明：`对所有用户开放`，但需要申请应用 `Key`，并受流量限制策略管理。
- JS API 2.0 文档明确说明：2021-12-02后申请的 Key 需要配合安全密钥，生产环境建议通过代理方式（`serviceHost + jscode`）接入。

因此本项目地图能力的最终目标定义为：

1. **优先接入高德地图 API（主方案）**：满足开题报告中“地图展示与路径规划服务集成”的目标。  
2. **同时保留离线地图兜底（备选方案）**：当部署环境无法稳定访问线上地图服务或存在网络策略限制时，切换本地瓦片方案，保证系统可演示、可交付。

当前前端地图渲染实现细则：

1. 数据源坐标按 `dataCoordinateSystem` 解析（默认 `wgs84`），在高德模式下自动转换为 `GCJ-02` 后再渲染。  
2. 路线轨迹优先级为 `AMap.LineSearch` 公交官方轨迹，其次 `luxianguiji`，最后才回退站点直连。  
3. 站点点击、车辆位置、路径规划起终点统一使用同一套高德坐标，确保可视化一致性。  

### 验收目标清单（必须完成）

| 模块 | 最终目标 | 验收标准 |
|------|----------|----------|
| 地图展示 | 高德JS API地图替换当前OSM方案 | 首页/地图页可正常加载，支持缩放、平移、标注 |
| 路线规划 | 接入高德路径规划API并返回可视化路线 | 输入起终点后可返回至少1条可行路线 |
| 智能推荐 | 无障碍评分与路线推荐形成前后端闭环 | 前端可调用`/route/plan`并显示排序结果与推荐理由 |
| 实时能力 | 模拟轮询升级为WebSocket推送机制 | 地图车辆位置可通过推送更新（非定时器本地自增） |
| ETA预测 | 提供可解释的到站估算模型并前端可视展示 | 返回ETA分钟、预计到达时刻、路况等级、剩余里程、均速 |
| 无障碍交互 | 修复并打通语音、高对比度、键盘导航 | 设置页开关可用，无JS报错，可在主页面生效 |
| 数据导出 | 增加路线/统计导出能力 | 后台支持导出Excel，导出文件可打开 |
| 离线兜底 | 提供离线地图切换能力（配置级） | 关闭线上地图后可切换离线瓦片并继续演示 |

### 当前完成进度（2026-02-18）

| 目标项 | 当前状态 | 说明 |
|------|------|------|
| 地图展示（高德主方案） | ✅ 已完成（已联调） | 已配置 `amapKey + securityJsCode`，并增加 `WGS84->GCJ` 转换与 `LineSearch` 轨迹优先渲染，失败自动降级 Leaflet |
| 路线规划（高德路径） | ✅ 基础接入完成 | 已接入后端`/map/amap/driving`并前端调用，待融合业务策略与换乘规则 |
| 智能推荐闭环 | ✅ 已完成 | 前端已接入`/route/plan`并展示排序、评分与推荐理由 |
| 无障碍交互闭环 | ✅ 已完成（本轮修复） | 设置页高对比度开关已修复，避免JS方法不存在报错 |
| WebSocket实时推送 | ✅ 已完成（含兜底） | 已接入`/ws/vehicle`，连接失败自动回退前端模拟 |
| ETA预测 | ✅ 已完成（精细化模型） | `/map/eta/{id}` 已返回剩余距离、路况等级、均速与到站时间，前端同步展示 |
| 数据导出Excel | ✅ 已完成 | 后台已支持按当前筛选条件导出`gongjiaoluxian-export.xlsx` |
| 离线地图切换 | ✅ 已完成（配置级） | 已支持 `leafletTileMode` 与 `leafletOfflineTileUrl` 配置切换 |

### 下一阶段任务（按优先级）

1. 将高德 Web 服务结果与`/route/plan`推荐算法融合（时间、路况、无障碍评分联合排序）。  
2. 实现多方案换乘规划（Dijkstra/A*）并在前台展示候选方案与换乘说明。  
3. 增加导出能力回归测试与统计报表导出（客流、无障碍设施覆盖率）。  
4. 在可控时间内补齐离线瓦片数据包（作为演示兜底，不阻塞主线开发）。  

### 非目标（本次不强制）

- 微服务拆分、分布式集群、复杂AI预测模型训练。
- 真实公交公司生产级数据接入（可用模拟或公开样例数据替代）。

### 离线地图配置示例

在 `src/main/resources/front/front/js/config.js` 中设置：

```javascript
var mapEngineConfig = {
  provider: 'leaflet',
  leafletTileMode: 'offline',
  leafletOfflineTileUrl: '/springbootmf383/front/tiles/{z}/{x}/{y}.png',
  leafletMinZoom: 3,
  leafletMaxZoom: 19
}
```

离线瓦片默认目录建议放在：

- `src/main/resources/front/front/tiles/{z}/{x}/{y}.png`

### 离线瓦片部署与校验命令

```bash
# 1) 部署离线瓦片（目录或压缩包）
bash scripts/offline-map-deploy.sh /mnt/e/offline-tiles --clean

# 2) 一键校验离线地图配置与瓦片数据
bash scripts/offline-map-check.sh
```

说明：

- `offline-map-deploy.sh` 支持目录、`.zip`、`.tar`、`.tar.gz`、`.tgz`。  
- 校验脚本会检查：
  - `leafletTileMode` 与 `leafletOfflineTileUrl` 配置是否存在；
  - 地图页是否包含离线/在线切换逻辑；
  - `front/tiles` 是否存在且包含 `*.png` 瓦片。

---

## 数据来源与许可

### 公交线路与站点来源

- 路线/站点数据来源：**OpenStreetMap（OSM）广州公交关系数据**
- 抓取方式：Overpass API（`network=广州公交` + 指定 relation id）
- 本次采集日期：**2026-02-18**
- 许可：**ODbL（Open Database License）**

### 本次使用的 OSM Relation

- `6503210`（1路：东山署前路总站 -> 芳村花园南门总站）
- `6517716`（3路：如意坊总站 -> 东山龟岗总站）
- `6560976`（10路：恒福路总站 -> 昌岗路总站）
- `6576283`（16路：天平架总站 -> 凤凰岗总站）
- `6596555`（31路：解放北路总站（应元路口）-> 南石西总站）

### 说明

- `zhandian_wuzhangai` 中的站点名称与经纬度来自 OSM 节点；无障碍细项（如升降台、盲道）优先读取节点标签（`wheelchair`、`tactile_paving` 等），缺失项以保守默认值填充，用于演示和算法验证。

---

## 技术架构

### 后端技术栈

```
Spring Boot 2.2.2.RELEASE
├── MyBatis-Plus 2.3        # ORM框架
├── MySQL 8.0               # 数据库
├── Shiro 1.3.2             # 权限管理
└── Hutool 4.0.12           # 工具类库
```

### 前端技术栈

```
管理后台：Vue.js + ElementUI
前台页面：jQuery + Bootstrap + Layui
地图组件：高德JS API（主） + Leaflet（降级兜底）
♿ 无障碍：Web Speech API + Vibration API + ARIA
```

### 系统架构

```
┌─────────────────────────────────────────────────────┐
│                    用户层                             │
│  管理后台(Vue)  │  前台页面(jQuery)  │  ♿无障碍设置   │
├─────────────────────────────────────────────────────┤
│                   表现层                              │
│  地图(高德/Leaflet双引擎)  │  ♿语音/主题/键盘           │
├─────────────────────────────────────────────────────┤
│                   API网关层                           │
│        RESTful API                                  │
├─────────────────────────────────────────────────────┤
│                   业务逻辑层                          │
│  Service层  │  无障碍路线评分算法                    │
├─────────────────────────────────────────────────────┤
│                   数据访问层                          │
│        MyBatis-Plus  │  DAO层 (14个Mapper)           │
├─────────────────────────────────────────────────────┤
│                   数据存储层                          │
│         MySQL 8.0 (含无障碍数据)                      │
└─────────────────────────────────────────────────────┘
```

---

## 核心模块设计

### 1. 地图可视化模块

```javascript
// 技术选型：高德JS API（主）+ Leaflet（兜底）
// 优势：在线能力完善，异常时可自动降级保证可用性

核心功能：
├── 地图初始化
│   ├── 设置中心点和缩放级别
│   ├── 加载高德底图（失败自动降级Leaflet）
│   └── 自定义地图样式
├── 路线绘制
│   ├── 根据站点坐标绘制Polyline
│   ├── 设置线路颜色和样式
│   └── 添加线路标签
├── 站点标注
│   ├── Marker标记
│   ├── Popup信息窗口
│   └── 站点图标样式
└── 车辆标注
    ├── 模拟位置更新
    ├── 方向箭头
    └── 点击查看详情
```

### 2. 实时位置更新模块

```javascript
// 演示方案：WebSocket实时推送 + 定时器兜底
// 优势：优先实时，网络异常时仍可保持演示连续性

实现思路：
├── 数据准备
│   ├── 从路线数据获取站点坐标列表
│   └── 定义车辆初始位置
├── 实时更新
│   ├── WebSocket接收后端推送
│   ├── 连接失败自动切换到2秒定时器模拟
│   └── 按站点序列更新车辆Marker位置
└── 到站提示
    ├── 更新Popup信息
    └── 循环播放
```

### 3. 无障碍路线评分模块

```java
// 算法：融合无障碍权重的综合评分
// 演示重点：展示多因素评分逻辑

评分维度：
├── 路线本身无障碍级别 (40%)
│   ├── 完全无障碍(0级) = 100分
│   ├── 基本无障碍(1级) = 66分
│   └── 有障碍(2-3级) = 较低分数
├── 途径站点无障碍情况 (30%)
│   ├── 升降梯、盲道、厕所、停车场
│   └── 爱心座椅数量
└── 用户适配度 (30%)
    ├── 视障：语音播报、盲道支持
    ├── 听障：电子显示屏
    └── 肢障：轮椅设施、电梯
```

---

## 快速开始

### 环境要求

| 组件 | 版本 | 说明 |
|------|------|------|
| JDK | 1.8+ | 必需 |
| Maven | 3.6+ | 必需 |
| MySQL | 8.0+ | 必需 |
| Docker | 20.10+ | 推荐 |

### 推荐启动流程（已验证）

> 适用于当前仓库的 WSL2 + Docker Desktop 开发环境。  
> 目标是保证 `http://localhost:8080` 在 Windows 浏览器可稳定访问。

```bash
# 1) 进入项目目录
cd /mnt/d/xx

# 2) 首次或代码更新后打包（生成 target/*.jar）
mvn -DskipTests package

# 3) 启动服务（自动确保 mysql 容器存在并拉起 app）
bash scripts/docker-app-up.sh

# 4) 访问系统
# 前台：http://localhost:8080/springbootmf383/front/index.html
# 后台：http://localhost:8080/springbootmf383/admin/dist/index.html
```

### 停止与排障

```bash
# 停止 app 容器
bash scripts/docker-app-down.sh

# 查看 app 日志（排查启动慢、数据库连接等问题）
docker logs -f bus-route-app

# 查看当前容器状态
docker ps --format 'table {{.Names}}\t{{.Status}}\t{{.Ports}}'
```

### 兼容启动方式（可选）

```bash
# 仅启动数据库（首次初始化可用）
docker compose up -d mysql

# 纯本地 Java 启动（不用容器）
mvn spring-boot:run
```

### 默认账号

| 角色 | 用户名 | 密码 |
|------|--------|------|
| 管理员 | `abo` | `abo` |
| 普通用户 | 需注册 | 需注册 |

---

## 答辩演示要点

### 功能演示清单

| 序号 | 功能 | 操作步骤 | 预期结果 | 备注 |
|------|------|----------|----------|------|
| 1 | 用户注册 | 填写信息提交 | 注册成功，自动登录 | |
| 2 | 路线查询 | 输入"101路" | 显示该线路详情 | |
| 3 | 地图展示 | 点击"地图"按钮 | 地图显示线路和站点 | |
| 4 | 实时车辆追踪 | 点击"实时车辆"按钮 | 优先实时推送，失败自动模拟移动 | 可演示兜底机制 |
| 5 | 收藏功能 | 点击收藏 | 加入我的收藏 | |
| 6 | 评论留言 | 发表评论 | 评论成功显示 | |
| 7 | 管理后台 | 登录后台 | 展示管理功能 | |
| **8** | ♿ **无障碍-语音播报** | 点击语音按钮 | 播报路线信息 | |
| **9** | ♿ **无障碍-高对比度** | 切换主题 | 黑白高对比度显示 | |
| **10** | ♿ **无障碍-键盘导航** | Alt+1/2/3 | 快速跳转页面 | |
| **11** | ♿ **无障碍-智能推荐** | 设置障碍档案 | 显示无障碍评分排序 | |

### 技术亮点说明

| 亮点 | 说明 |
|------|------|
| **前后端分离** | Spring Boot + jQuery/Bootstrap，RESTful API设计 |
| **♿ WCAG合规** | 符合WCAG 2.1 AA级无障碍标准 |
| **♿ 多模态交互** | 语音播报+触觉反馈+键盘导航 |
| **♿ 智能评分算法** | 融合无障碍权重的路线评分推荐算法 |
| **地图可视化** | 高德JS API主渲染，失败自动降级Leaflet |
| **实时更新** | WebSocket推送车辆位置，失败自动降级定时器 |
| **响应式设计** | 适配多种设备屏幕 |

### 可能的答辩问题

| 问题 | 回答要点 |
|------|----------|
| 如何获取实时数据？ | 演示版使用模拟数据，生产环境可对接GPS数据源 |
| 地图使用什么服务？ | 主方案为高德JS API，异常时自动降级Leaflet兜底 |
| 如何扩展？ | 模块化设计，预留接口，易于替换数据源 |
| **如何实现无障碍？** | 遵循WCAG 2.1标准，实现ARIA标签、键盘导航、语音播报、高对比度主题 |
| **路线推荐如何考虑无障碍？** | 评分算法融合路线级别+站点设施+用户档案，按无障碍评分排序 |
| **语音播报如何实现？** | 使用Web Speech API，支持路线和站点信息播报 |
| **高对比度主题如何保证可读性？** | 符合WCAG AA级对比度要求（4.5:1），使用黑白黄配色 |

---

## 项目结构

```
bus-route-query-system/
├── src/main/java/com/
│   ├── controller/        # 控制器层
│   ├── service/          # 业务逻辑层
│   ├── dao/              # 数据访问层
│   ├── entity/           # 实体类
│   ├── utils/            # 工具类
│   └── config/           # 配置类
├── src/main/resources/
│   ├── admin/            # 管理后台前端
│   ├── front/            # 用户前台前端
│   └── application.yml   # 应用配置
├── images/               # 项目截图
├── init-db.sql          # 数据库脚本
├── docker-compose.yml   # Docker配置
├── Dockerfile           # 镜像构建
└── README.md            # 项目文档
```

---

## 数据库设计

### 核心数据表

| 表名 | 说明 | 主要字段 |
|------|------|----------|
| `users` | 管理员表 | id, username, password, role |
| `yonghu` | 用户表 | id, zhanghao, mima, xingming, zhangaijibie, yuyinbofang, gaoduibidu |
| `gongjiaoluxian` | 公交路线表 | id, luxianbianhao, luxianmingcheng, wuzhangaijibie, yuyintongbao, mangdaozhichi |
| `zhandian_wuzhangai` | 站点无障碍信息表 | id, zhandianming, shengjiangtai, mangdao, zhuizhu, zuoweishu |
| `wangzhangonggao` | 网站公告表 | id, biaoti, neirong, fabushijian |
| `messages` | 留言建议表 | id, userid, content, reply |
| `chat` | 在线提问表 | id, userid, ask, reply |

---

## 扩展改造指南

### 从演示版到生产版

```diff
# 模拟数据 → 真实数据
- 定时器模拟位置
+ GPS设备数据接口 + WebSocket实时推送

# 在线地图 → 离线地图
- 高德/Leaflet在线服务
+ 自建瓦片服务器或下载离线瓦片

# 单机部署 → 集群部署
- 单机MySQL
+ MySQL主从 + Redis集群

# 简单认证 → 完善安全
- 明文密码
+ BCrypt加密 + JWT

# 路线评分 → 真正换乘规划
- 路线筛选+评分排序
+ Dijkstra/A* 图论算法实现多站点换乘

# 添加ETA预测
+ 当前为“距离 + 路况 + 停靠”精细化估算
+ 下一步可接入真实GPS/AVL数据进一步校准模型
```

---

## 常用命令

```bash
# Maven操作
mvn clean package             # 打包
mvn spring-boot:run           # 运行

# Docker操作
bash scripts/docker-app-up.sh     # 推荐：启动 app + mysql(自动兜底)
bash scripts/docker-app-down.sh   # 停止 app
docker logs -f bus-route-app      # 查看 app 日志
docker compose up -d mysql        # 仅启动数据库
docker compose down               # 停止 compose 管理的服务

# Git操作
git pull origin main          # 拉取更新
git add . && git commit       # 提交更改
```

---

## 许可证

本项目采用 MIT 许可证 - 详见 [LICENSE](LICENSE) 文件

---

## 联系方式

- 仓库地址：https://github.com/Ruler4396/bus-route-query-system
- 问题反馈：[Issues](https://github.com/Ruler4396/bus-route-query-system/issues)

---

**毕业设计项目 | Powered by Spring Boot | Made with ❤️ by Ruler4396**
